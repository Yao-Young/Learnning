设备管理

磁盘一直在转，没有停。



### I/O系统

通常把I/O设备及其接口线路、控制部件、通道和管理软件称为I/O系统。

分类

按I/O操作特性：

- 输入型设备
- 输出型设备
- 存储型设备

按I/O信息交换单位：

- 字符设备：

  输入设备和输出设备(交换单位为字节)

- 块设备：

  存储设备，分为 顺序存储和直接存储

  前者严格依赖信息的物理位置进行定位和读写，如磁带；后者的特点是存储任何一个物理块所需时间几乎不依赖于此信息所处的位置，如磁盘。

  块：存储介质上连续信息所组成的一个区域，块设备每次与内存交换一块或多块信息。

### I/O控制方式

I/O控制是通过软硬件技术对CPU和设备的职能进行合理分工，以平衡系统性能和硬件成本之间的矛盾。分为：轮询、中断、DMA和通道，主要差别在于：CPU和设备并行工作的方式和程度不同。

- 轮询

  轮询方式又称为程序直接控制方式，使用查询指令测试设备控制器的忙闲状态位，确定内存和设备是否能交换数据。

  具体过程如下：

  1、CPU上运行的程序需要从设备读入一批数据，则CPU程序设置交换字节数和数据读入内存的起始地址

  2、然后向设备发出查询指令

  3、设备控制器便把状态返回给CPU

  4、如果设备忙碌或设备未就绪，则重复测试过程，继续进行查询；否者开始数据传送，CPU从I/O接口(数据寄存器)读取一个字，再用存储指令保存到内存。如果传送尚未结束，再次向设备发出查询指令，直到全部数据传输完成。

  评价：

  ```
  1、CPU轮询设备当前的状态会终止原程序的执行，浪费宝贵时间
  2、I/O准备就绪后，需要CPU参与数据传输工作
  可见CPU和设备只能串行工作，使主机不能充分发挥功效，设备也不能得到合理利用，整个系统效率低
  ```

  流程图：

  

- 中断方式

  **中断方式要求CPU与设备控制器及设备之间存在中断请求线，设备控制器的状态寄存器有相应的中断允许位**

  CPU与设备之间传输数据过程如下：

  ![1655471274396](./assets/1655471274396.png)

  